<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MongoDB Data Model Diagram</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
        }
        .collection {
            border: 1px solid black;
            padding: 10px;
            margin: 10px;
            width: 300px;
            text-align: center;
        }
        .relation {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
        }
        .line {
            height: 2px;
            background-color: black;
            width: 200px;
        }
        h3 {
            margin-bottom: 5px;
        }
        ul {
            text-align: left;
            font-size: 14px;
        }
        .relationship-type {
            font-style: italic;
            font-size: 14px;
            margin-top: 5px;
        }
        .required {
            color: red;
        }
        .default-value {
            color: green;
        }
    </style>
</head>
<body>
    <h1>MongoDB Data Model Diagram (with Required and Default Values)</h1>

    <div class="container">
        <!-- User Collection -->
        <div class="collection">
            <h3>User Collection</h3>
            <ul>
                <li>_id: ObjectId</li>
                <li>firstName: String <span class="required">(required)</span></li>
                <li>lastName: String <span class="required">(required)</span></li>
                <li>email: String <span class="required">(required)</span></li>
                <li>password: String <span class="required">(required)</span></li>
                <li>status: String <span class="required">(required)</span> <span class="default-value">(default: "active")</span></li>
                <li>type: String <span class="required">(required)</span> <span class="default-value">(default: "user")</span></li>
            </ul>
            <div class="relationship-type">
                One-to-Many with Assets, Orders, Reviews, Payments, Messages
            </div>
        </div>

        <!-- Asset Collection -->
        <div class="collection">
            <h3>Asset Collection</h3>
            <ul>
                <li>_id: ObjectId</li>
                <li>assetType: String <span class="required">(required)</span></li>
                <li>bankName: String (conditionally required based on assetType)</li>
                <li>provider: String (conditionally required based on assetType)</li>
                <li>companyName: String (conditionally required based on assetType)</li>
                <li>propertyAddress: String (conditionally required based on assetType)</li>
                <li>otherAssetDetails: String (conditionally required based on assetType)</li>
                <li>userId: ObjectId (ref: User) <span class="required">(required)</span></li>
            </ul>
            <div class="relationship-type">
                Many-to-One with User
            </div>
        </div>

        <!-- Order Collection -->
        <div class="collection">
            <h3>Order Collection</h3>
            <ul>
                <li>_id: ObjectId</li>
                <li>userId: ObjectId (ref: User) <span class="required">(required)</span></li>
                <li>status: String <span class="required">(required)</span> <span class="default-value">(default: "CreatingOrder")</span></li>
                <li>completionDate: Date <span class="default-value">(default: null)</span></li>
                <li>peopleAndRoles: Array (personId: ObjectId, role: Array[String]) <span class="required">(required)</span></li>
                <li>assetsAndDistribution: Array (assetId: ObjectId, distribution: Array[personId, receivingAmount])</li>
            </ul>
            <div class="relationship-type">
                Many-to-One with User <br>
                Many-to-Many with Person and Asset
            </div>
        </div>

        <!-- Person Collection -->
        <div class="collection">
            <h3>Person Collection</h3>
            <ul>
                <li>_id: ObjectId</li>
                <li>title: String <span class="required">(required)</span></li>
                <li>fullLegalName: String <span class="required">(required)</span></li>
                <li>fullAddress: String <span class="required">(required)</span></li>
                <li>dob: Date <span class="required">(required)</span></li>
                <li>email: String</li>
                <li>tel: String</li>
                <li>maritalStatus: String</li>
                <li>hasChildrenStatus: String</li>
                <li>userId: ObjectId (ref: User) <span class="required">(required)</span></li>
            </ul>
            <div class="relationship-type">
                Many-to-One with User <br>
                Many-to-Many with Order
            </div>
        </div>

        <!-- Review Collection -->
        <div class="collection">
            <h3>Review Collection</h3>
            <ul>
                <li>_id: ObjectId</li>
                <li>userId: ObjectId (ref: User) <span class="required">(required)</span></li>
                <li>reviewText: String <span class="required">(required)</span></li>
                <li>userFirstName: String <span class="required">(required)</span></li>
                <li>rating: Number <span class="required">(required)</span></li>
            </ul>
            <div class="relationship-type">
                Many-to-One with User
            </div>
        </div>

        <!-- Payment Collection -->
        <div class="collection">
            <h3>Payment Collection</h3>
            <ul>
                <li>_id: ObjectId</li>
                <li>orderId: ObjectId (ref: Order) <span class="required">(required)</span></li>
                <li>userId: ObjectId (ref: User) <span class="required">(required)</span></li>
                <li>amount: Number <span class="required">(required)</span></li>
                <li>status: String <span class="required">(required)</span> <span class="default-value">(default: "pending")</span></li>
                <li>paymentDate: Date <span class="required">(required)</span> <span class="default-value">(default: Date.now)</span></li>
                <li>products: Array of Embedded Product Documents <span class="required">(required)</span></li>
                <li>paymentMethod: String <span class="required">(required)</span> <span class="default-value">(enum: ['card', 'bank_transfer', 'paypal', 'stripe'])</span></li>
            </ul>
            <div class="relationship-type">
                Many-to-One with User and Order
            </div>
        </div>

        <!-- Message Collection -->
        <div class="collection">
            <h3>Message Collection</h3>
            <ul>
                <li>_id: ObjectId</li>
                <li>senderName: String <span class="required">(required)</span></li>
                <li>senderEmail: String <span class="required">(required)</span></li>
                <li>messageText: String <span class="required">(required)</span></li>
                <li>userId: ObjectId (ref: User) (optional)</li>
            </ul>
            <div class="relationship-type">
                Many-to-One with User (optional)
            </div>
        </div>
    </div>

    <!-- Relationships -->
    <div class="relation">
        <div class="collection">
            <h3>User Collection</h3>
        </div>
        <div class="line"></div>
        <div class="collection">
            <h3>Asset Collection</h3>
        </div>
    </div>

    <div class="relation">
        <div class="collection">
            <h3>User Collection</h3>
        </div>
        <div class="line"></div>
        <div class="collection">
            <h3>Order Collection</h3>
        </div>
    </div>

    <div class="relation">
        <div class="collection">
            <h3>User Collection</h3>
        </div>
        <div class="line"></div>
        <div class="collection">
            <h3>Review Collection</h3>
        </div>
    </div>

    <div class="relation">
        <div class="collection">
            <h3>Order Collection</h3>
        </div>
        <div class="line"></div>
        <div
        <div class="collection">
            <h3>Payment Collection</h3>
        </div>
    </div>

    <div class="relation">
        <div class="collection">
            <h3>User Collection</h3>
        </div>
        <div class="line"></div>
        <div class="collection">
            <h3>Message Collection</h3>
        </div>
    </div>

</body>
</html>
